@model IEnumerable<ResturantDemo.Models.Category>

@{
    ViewBag.Title = "Home Page";
}

<div class="jumbotron">
    <h1>Restaurant</h1>
    <p class="lead">Hey hey!<marquee>Come and eat our food!</marquee></p>
</div>

@if (User.Identity.IsAuthenticated)
{
    <div>
        <button class="btn btn-primary" onclick="ShowCreateForm()">Add a Category</button>
        <div id="CreateForm"></div>
    </div>
}


<div class="row">
    <div class="col-md-9">
        @foreach (var category in Model)
        {
            @Html.Partial("_MenuItemPartial", category)
        }
    </div>
    <div class="col-md-3">
        Resturant side bar
    </div>
</div>

@section scripts{

    <script>
        var ShowCreateForm = function () {
            $.ajax({
                url: "/home/create",
                method: "GET",
                dataType:"html",
                success: function (partial) {
                    $("#CreateForm").html(partial);
                }
            })
        }
        var ShowEditForm = function (categoryId) {
        	$.ajax({
        		url: "/home/Edit/?categoryId=" + categoryId,
        		method: "GET",
        		dataType: "html",
        		success: function (partial) {
        			$("#CreatePanelForm").html(partial);
        		}
        	})
        }
        var ShowDeleteForm = function (categoryId) {
        	$.ajax({
        		url: "/home/Delete/?categoryId=" + categoryId,
        		method: "GET",
        		dataType: "html",
        		success: function (partial) {
        			$("#CreatePanelForm").html(partial);
        		}
        	})
        }
		var ShowCreateItemForm = function (categoryId) {
			$.ajax({
				url: "/home/CreateItem/?categoryId=" + categoryId,
				method: "GET",
				dataType: "html",
				success: function (partial) {
					$("#CreatePanelForm").html(partial);
				}
			})
		}
		var ShowEditItemForm = function (menuId) {
			$.ajax({
				url: "/home/EditItem/?menuId=" + menuId,
				method: "GET",
				dataType: "html",
				success: function (partial) {
					$("#CreateMenuForm").html(partial);
				}
			})
		}
		var ShowDeleteItemForm = function (menuId) {
			$.ajax({
				url: "/home/DeleteItem/?menuId=" + menuId,
				method: "GET",
				dataType: "html",
				success: function (partial) {
					$("#CreateMenuForm").html(partial);
				}
			})
		}
    </script>
}